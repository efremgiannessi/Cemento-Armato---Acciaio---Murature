<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcolo Strutturale - NTC 2018</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Piccola correzione per rendere il look identico all'originale */
        body { background-color: #020617; color: #e2e8f0; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- SETUP AMBIENTE ---
        const { useState, useEffect } = React;

        // --- DEFINIZIONE ICONE (Inline SVG per evitare dipendenze esterne complesse) ---
        // Ho ricreato i componenti delle icone Lucide usate nel codice originale
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Calculator = (props) => <IconBase {...props}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></IconBase>;
        const Layout = (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="9" x2="9" y1="9" y2="21"/></IconBase>;
        const Ruler = (props) => <IconBase {...props}><path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"/><path d="m14.5 12.5 2-2"/><path d="m11.5 9.5 2-2"/><path d="m8.5 6.5 2-2"/><path d="m17.5 15.5 2-2"/></IconBase>;
        const Settings = (props) => <IconBase {...props}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></IconBase>;
        const Info = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>;
        const AlertTriangle = (props) => <IconBase {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><path d="m9 18 6-6-6-6"/></IconBase>;
        const Activity = (props) => <IconBase {...props}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></IconBase>;
        const Building = (props) => <IconBase {...props}><rect width="16" height="20" x="4" y="2" rx="2" ry="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/></IconBase>;
        const Hammer = (props) => <IconBase {...props}><path d="m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9"/><path d="M17.64 15 22 10.64"/><path d="m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25V2.46V2a2 2 0 0 0-2-2h-3a2 2 0 0 0-2 2v5.8c0 .85-.33 1.65-.93 2.25L9.64 11.36"/></IconBase>;


        // --- DATA & CONSTANTS (NTC 2018) ---

        const STEEL_PROFILES = [
          { name: 'IPE 200', h: 200, b: 100, tw: 5.6, tf: 8.5, A: 2850, Iy: 19430000, Wpl_y: 220600, iy: 82.6 },
          { name: 'IPE 240', h: 240, b: 120, tw: 6.2, tf: 9.8, A: 3910, Iy: 38920000, Wpl_y: 366600, iy: 99.7 },
          { name: 'IPE 300', h: 300, b: 150, tw: 7.1, tf: 10.7, A: 5380, Iy: 83560000, Wpl_y: 628400, iy: 125.0 },
          { name: 'HEB 200', h: 200, b: 200, tw: 9.0, tf: 15.0, A: 7810, Iy: 56960000, Wpl_y: 642500, iy: 85.4 },
          { name: 'HEB 240', h: 240, b: 240, tw: 10.0, tf: 17.0, A: 10600, Iy: 112600000, Wpl_y: 1053000, iy: 103.0 },
        ];

        const MASONRY_TYPES = [
          { id: 1, name: 'Pietrame disordinato', fm_min: 1.0, fm_max: 2.0, tau0_min: 0.018, tau0_max: 0.032 },
          { id: 2, name: 'Muratura in mattoni pieni e malta di calce', fm_min: 2.6, fm_max: 4.3, tau0_min: 0.05, tau0_max: 0.13 },
          { id: 3, name: 'Blocchi lapidei squadrati', fm_min: 6.0, fm_max: 8.0, tau0_min: 0.09, tau0_max: 0.18 },
        ];

        // --- COMPONENTS ---

        // 1. CONCRETE MODULE
        const ConcreteModule = () => {
          const [inputs, setInputs] = useState({
            b: 300, // mm
            h: 500, // mm
            c: 30,  // copriferro mm
            fck: 25, // MPa
            fyk: 450, // MPa
            as_bot_num: 3, // numero barre
            as_bot_phi: 16, // diametro mm
            N_ed: 0, // kN (Axial Load)
            cot_theta: 2.5 // Inclinazione bielle
          });

          const [results, setResults] = useState({
            M_Rd: 0,
            x: 0,
            V_Rd_c: 0,
            rho_l: 0
          });

          useEffect(() => {
            // Basic Geometry
            const d = inputs.h - inputs.c - inputs.as_bot_phi/2;
            const As = inputs.as_bot_num * Math.PI * Math.pow(inputs.as_bot_phi/2, 2); // mm2
            
            // Design Strengths (NTC 18)
            const fcd = (0.85 * inputs.fck) / 1.5;
            const fyd = inputs.fyk / 1.15;

            // --- Bending (Simplified Rectangular Section) ---
            const Ned_N = inputs.N_ed * 1000;
            const x_lim = (As * fyd + Ned_N) / (0.8 * inputs.b * fcd);
            
            // Moment Capacity around tension steel
            const Fc = 0.8 * inputs.b * x_lim * fcd;
            const z = d - 0.4 * x_lim;
            let MRd_kNm = (Fc * z) / 1000000;

            if (inputs.N_ed !== 0) {
                MRd_kNm -= (inputs.N_ed * (inputs.h/2 - inputs.c - inputs.as_bot_phi/2)) / 1000; 
            }

            // --- Shear (Taglio) §4.1.2.3.5 ---
            const v = 0.5 * (1 - inputs.fck/250); // reduction factor for cracked concrete
            const alpha_c = 1; 
            const z_shear = 0.9 * d;
            const cot = inputs.cot_theta;
            const tan = 1/cot;
            
            const VRcd_N = alpha_c * inputs.b * z_shear * v * fcd / (cot + tan);
            
            setResults({
              M_Rd: Math.max(0, MRd_kNm),
              x: x_lim,
              V_Rd_c: VRcd_N / 1000,
              rho_l: (As / (inputs.b * d)) * 100
            });

          }, [inputs]);

          const inputClass = "w-full p-2 border border-slate-600 rounded-md bg-slate-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none";
          const labelClass = "text-sm text-slate-400";

          return (
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 p-4">
              <div className="space-y-4">
                <h3 className="text-lg font-semibold text-blue-400 flex items-center gap-2">
                  <Building size={18} /> Geometria & Materiali
                </h3>
                
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className={labelClass}>Base b (mm)</label>
                    <input type="number" value={inputs.b} onChange={e => setInputs({...inputs, b: parseFloat(e.target.value)})} className={inputClass} />
                  </div>
                  <div>
                    <label className={labelClass}>Altezza h (mm)</label>
                    <input type="number" value={inputs.h} onChange={e => setInputs({...inputs, h: parseFloat(e.target.value)})} className={inputClass} />
                  </div>
                  <div>
                    <label className={labelClass}>Calcestruzzo fck</label>
                    <select value={inputs.fck} onChange={e => setInputs({...inputs, fck: parseFloat(e.target.value)})} className={inputClass}>
                      <option value="25">C25/30</option>
                      <option value="28">C28/35</option>
                      <option value="30">C30/37</option>
                      <option value="40">C40/50</option>
                    </select>
                  </div>
                   <div>
                    <label className={labelClass}>Acciaio fyk</label>
                    <select value={inputs.fyk} onChange={e => setInputs({...inputs, fyk: parseFloat(e.target.value)})} className={inputClass}>
                      <option value="450">B450C</option>
                    </select>
                  </div>
                </div>

                <div className="bg-slate-800 p-3 rounded-lg border border-slate-700">
                    <h4 className="text-sm font-medium mb-2 text-slate-300">Armatura Longitudinale (Inferiore)</h4>
                    <div className="flex gap-2 text-slate-200">
                        <input type="number" value={inputs.as_bot_num} onChange={e => setInputs({...inputs, as_bot_num: parseFloat(e.target.value)})} className={`${inputClass} w-20 text-center`} />
                        <span className="self-center">Φ</span>
                        <select value={inputs.as_bot_phi} onChange={e => setInputs({...inputs, as_bot_phi: parseFloat(e.target.value)})} className={`${inputClass} w-24`}>
                            <option value="12">12</option>
                            <option value="14">14</option>
                            <option value="16">16</option>
                            <option value="20">20</option>
                        </select>
                    </div>
                </div>
                
                <div className="bg-blue-900/30 p-3 rounded-lg border border-blue-800/50">
                     <label className="text-sm text-blue-300 font-medium">Sforzo Normale N_Ed (kN)</label>
                     <input type="number" value={inputs.N_ed} onChange={e => setInputs({...inputs, N_ed: parseFloat(e.target.value)})} className="w-full p-2 border border-blue-700/50 rounded-md mt-1 bg-slate-800 text-white" />
                     <p className="text-xs text-blue-400/70 mt-1">Positivo = Compressione</p>
                </div>
              </div>

              <div className="space-y-6">
                <h3 className="text-lg font-semibold text-green-400 flex items-center gap-2">
                  <Activity size={18} /> Risultati SLU
                </h3>

                {/* Results Card */}
                <div className="bg-slate-800 rounded-xl shadow-lg border border-slate-700 overflow-hidden">
                    <div className="bg-slate-900/50 p-3 border-b border-slate-700 flex justify-between items-center">
                        <span className="font-semibold text-slate-200">Resistenza Flessionale</span>
                        <span className="text-xs bg-green-900/50 text-green-300 px-2 py-1 rounded-full border border-green-800">§4.1.2.1</span>
                    </div>
                    <div className="p-4">
                        <div className="flex justify-between items-end mb-2">
                            <span className="text-slate-400">Momento Resistente M_Rd</span>
                            <span className="text-2xl font-bold text-green-400">{results.M_Rd.toFixed(2)} <span className="text-base text-slate-500">kNm</span></span>
                        </div>
                        <div className="w-full bg-slate-700 rounded-full h-2.5">
                            <div className="bg-green-500 h-2.5 rounded-full" style={{ width: `${Math.min(100, (results.x / inputs.h)*100)}%` }}></div>
                        </div>
                        <div className="flex justify-between text-xs text-slate-500 mt-1">
                            <span>Asse neutro x = {results.x.toFixed(1)} mm</span>
                            <span>x/d = {(results.x / (inputs.h - inputs.c)).toFixed(3)}</span>
                        </div>
                    </div>
                </div>

                <div className="bg-slate-800 rounded-xl shadow-lg border border-slate-700 overflow-hidden">
                     <div className="bg-slate-900/50 p-3 border-b border-slate-700 flex justify-between items-center">
                        <span className="font-semibold text-slate-200">Resistenza Taglio-Compressione</span>
                        <span className="text-xs bg-orange-900/50 text-orange-300 px-2 py-1 rounded-full border border-orange-800">§4.1.2.3.5</span>
                    </div>
                     <div className="p-4">
                        <div className="flex justify-between items-center mb-4">
                             <span className="text-slate-400">Inclinazione bielle cot(θ)</span>
                             <div className="flex items-center gap-3">
                                <input 
                                    type="range" min="1" max="2.5" step="0.1" 
                                    value={inputs.cot_theta} 
                                    onChange={e => setInputs({...inputs, cot_theta: parseFloat(e.target.value)})}
                                    className="w-24 accent-orange-500"
                                />
                                <span className="font-mono text-orange-300 font-bold">{inputs.cot_theta}</span>
                             </div>
                        </div>
                        <div className="flex justify-between items-end">
                            <span className="text-slate-400">V_Rd,max (Bielle cls)</span>
                            <span className="text-2xl font-bold text-orange-400">{results.V_Rd_c.toFixed(1)} <span className="text-base text-slate-500">kN</span></span>
                        </div>
                         <p className="text-xs text-slate-500 mt-2">Nota: Verificare anche V_Rsd (armature trasversali).</p>
                     </div>
                </div>
              </div>
            </div>
          );
        };

        // 2. STEEL MODULE
        const SteelModule = () => {
          const [selectedProfileIdx, setSelectedProfileIdx] = useState(1);
          const [steelGrade, setSteelGrade] = useState(275); // fyk
          const [N_Ed, setNEd] = useState(50); // kN

          const profile = STEEL_PROFILES[selectedProfileIdx];
          const epsilon = Math.sqrt(235 / steelGrade);
          
          // Classification
          const c_flange = (profile.b - profile.tw) / 2 - profile.tf; 
          const ratio_flange = c_flange / profile.tf;
          
          let classification = 1;
          if (ratio_flange > 14 * epsilon) classification = 4;
          else if (ratio_flange > 10 * epsilon) classification = 3;
          else if (ratio_flange > 9 * epsilon) classification = 2;
          
          // Resistance
          const gammaM0 = 1.05;
          const fyd = steelGrade / gammaM0;
          const N_pl_Rd = (profile.A * fyd) / 1000; // kN
          
          // Buckling
          const Lcr = 3000; 
          const lambda = Lcr / profile.iy;
          const lambda_1 = 93.9 * epsilon;
          const lambda_bar = lambda / lambda_1;
          const alpha = 0.21; 
          const phi = 0.5 * (1 + alpha * (lambda_bar - 0.2) + lambda_bar * lambda_bar);
          const chi = 1 / (phi + Math.sqrt(phi * phi - lambda_bar * lambda_bar));
          const chi_final = Math.min(1.0, chi);
          const N_b_Rd = (chi_final * profile.A * fyd) / 1000;

          const inputClass = "w-full p-2 border border-slate-600 rounded-md bg-slate-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none";
          const labelClass = "text-sm text-slate-400 block mb-1";

          return (
            <div className="p-4 grid grid-cols-1 md:grid-cols-2 gap-6">
              <div className="space-y-4">
                <h3 className="text-lg font-semibold text-slate-200 flex items-center gap-2"><Hammer size={18}/> Dati Profilo</h3>
                
                <div>
                    <label className={labelClass}>Profilo</label>
                    <select 
                        className={inputClass}
                        value={selectedProfileIdx}
                        onChange={(e) => setSelectedProfileIdx(parseInt(e.target.value))}
                    >
                        {STEEL_PROFILES.map((p, idx) => (
                            <option key={idx} value={idx}>{p.name}</option>
                        ))}
                    </select>
                </div>

                <div className="grid grid-cols-2 gap-4">
                     <div>
                        <label className={labelClass}>Acciaio</label>
                        <select 
                            className={inputClass}
                            value={steelGrade}
                            onChange={(e) => setSteelGrade(parseInt(e.target.value))}
                        >
                            <option value={235}>S235</option>
                            <option value={275}>S275</option>
                            <option value={355}>S355</option>
                        </select>
                    </div>
                    <div>
                         <label className={labelClass}>Carico Assiale (kN)</label>
                         <input 
                            type="number" 
                            value={N_Ed} 
                            onChange={e => setNEd(parseFloat(e.target.value))} 
                            className={inputClass}
                         />
                    </div>
                </div>

                <div className="bg-slate-900 border border-slate-700 text-slate-300 p-4 rounded-lg text-sm font-mono mt-4 shadow-inner">
                    <p>Area: <span className="text-blue-400">{profile.A}</span> mm²</p>
                    <p>Iy: <span className="text-blue-400">{(profile.Iy/10000).toFixed(0)}</span> cm⁴</p>
                    <p>Wpl: <span className="text-blue-400">{(profile.Wpl_y/1000).toFixed(0)}</span> cm³</p>
                </div>
              </div>

              <div className="space-y-4">
                <h3 className="text-lg font-semibold text-slate-200 flex items-center gap-2"><CheckCircle size={18}/> Verifiche §4.2</h3>
                
                {/* Classification */}
                <div className="bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-700">
                    <div className="flex justify-between items-center mb-2">
                        <span className="text-slate-300 font-medium">Classificazione Sezione</span>
                        <span className={`px-3 py-1 rounded-full text-xs font-bold border ${classification <= 2 ? 'bg-green-900/50 text-green-300 border-green-800' : 'bg-yellow-900/50 text-yellow-300 border-yellow-800'}`}>
                            CLASSE {classification}
                        </span>
                    </div>
                    <div className="text-xs text-slate-500">
                        c/t flangia = {ratio_flange.toFixed(2)} (Limite Cl.1: {(9*epsilon).toFixed(2)})
                    </div>
                </div>

                {/* Resistance */}
                <div className="bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-700">
                    <div className="flex justify-between items-center mb-2">
                        <span className="text-slate-300 font-medium">Resistenza Plastica N_pl,Rd</span>
                        <span className="text-xl font-bold text-slate-200">{N_pl_Rd.toFixed(1)} kN</span>
                    </div>
                     <div className="w-full bg-slate-700 rounded-full h-2">
                        <div 
                            className={`h-2 rounded-full ${N_Ed > N_pl_Rd ? 'bg-red-500' : 'bg-blue-500'}`} 
                            style={{ width: `${Math.min(100, (N_Ed / N_pl_Rd)*100)}%` }}
                        ></div>
                    </div>
                    <div className="mt-1 text-right text-xs text-slate-500">
                        Utilizzo: {((N_Ed / N_pl_Rd)*100).toFixed(1)}%
                    </div>
                </div>

                {/* Buckling */}
                 <div className="bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-700">
                    <div className="flex justify-between items-center mb-2">
                        <span className="text-slate-300 font-medium">Stabilità (Instabilità di punta)</span>
                        <span className="text-sm text-slate-500">L0 = 3m</span>
                    </div>
                    <div className="grid grid-cols-2 gap-2 text-sm mb-2">
                        <div className="bg-slate-900 p-2 rounded text-slate-400">λ̅ = {lambda_bar.toFixed(2)}</div>
                        <div className="bg-slate-900 p-2 rounded text-slate-400">χ = {chi_final.toFixed(2)}</div>
                    </div>
                    <div className="flex justify-between items-center pt-2 border-t border-slate-700/50 mt-2">
                        <span className="text-slate-400">N_b,Rd</span>
                        <span className={`text-xl font-bold ${N_Ed > N_b_Rd ? 'text-red-400' : 'text-green-400'}`}>
                            {N_b_Rd.toFixed(1)} kN
                        </span>
                    </div>
                </div>
              </div>
            </div>
          );
        };

        // 3. MASONRY MODULE (EXISTING BUILDINGS)
        const MasonryModule = () => {
            const [typeId, setTypeId] = useState(1);
            const [LC, setLC] = useState('LC1'); // LC1, LC2, LC3

            const type = MASONRY_TYPES.find(t => t.id === typeId);
            
            // Confidence Factors
            const getFC = (lc) => {
                switch(lc) {
                    case 'LC1': return 1.35;
                    case 'LC2': return 1.20;
                    case 'LC3': return 1.00;
                    default: return 1.35;
                }
            };

            const FC = getFC(LC);
            const gamma_m = 2.0; 

            const fd_min = type.fm_min / (FC * gamma_m);
            const taud_min = type.tau0_min / (FC * gamma_m);

            const inputClass = "w-full p-3 border border-slate-600 rounded-lg bg-slate-700 text-white shadow-sm focus:ring-2 focus:ring-blue-500 outline-none";

            return (
                <div className="p-4 space-y-6">
                     <div className="bg-amber-900/30 border-l-4 border-amber-600 p-4">
                        <p className="text-sm text-amber-200">
                            <strong className="text-amber-500">Edifici Esistenti (Cap. 8):</strong> La definizione dei parametri meccanici dipende dal Livello di Conoscenza (LC) raggiunto tramite rilievi e indagini.
                        </p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div className="space-y-4">
                             <div>
                                <label className="text-sm font-medium text-slate-300 block mb-2">Tipologia Muraria (Tab. C8.5.I)</label>
                                <select 
                                    className={inputClass}
                                    value={typeId}
                                    onChange={(e) => setTypeId(parseInt(e.target.value))}
                                >
                                    {MASONRY_TYPES.map(t => (
                                        <option key={t.id} value={t.id}>{t.name}</option>
                                    ))}
                                </select>
                            </div>

                            <div>
                                <label className="text-sm font-medium text-slate-300 block mb-2">Livello di Conoscenza (LC)</label>
                                <div className="flex gap-2">
                                    {['LC1', 'LC2', 'LC3'].map(l => (
                                        <button 
                                            key={l}
                                            onClick={() => setLC(l)}
                                            className={`flex-1 py-2 rounded-md font-medium transition-colors border border-transparent ${LC === l ? 'bg-blue-600 text-white' : 'bg-slate-800 text-slate-400 hover:bg-slate-700 border-slate-700'}`}
                                        >
                                            {l}
                                        </button>
                                    ))}
                                </div>
                                <p className="text-xs text-slate-500 mt-2 text-right">Fattore di Confidenza FC = {FC.toFixed(2)}</p>
                            </div>
                        </div>

                        <div className="bg-slate-800 rounded-xl shadow-lg border border-slate-700 p-6">
                            <h3 className="text-lg font-bold text-slate-200 mb-4 border-b border-slate-700 pb-2">Parametri di Calcolo (SLU)</h3>
                            
                            <div className="space-y-4">
                                <div className="flex justify-between items-center">
                                    <div>
                                        <span className="block text-slate-400 text-sm">Resistenza a Compressione f_d</span>
                                        <span className="text-xs text-slate-600">f_m,min / (FC * γm)</span>
                                    </div>
                                    <span className="text-2xl font-bold text-blue-400">{fd_min.toFixed(2)} <span className="text-sm text-slate-500">MPa</span></span>
                                </div>

                                <div className="flex justify-between items-center">
                                    <div>
                                        <span className="block text-slate-400 text-sm">Resistenza a Taglio τ_d</span>
                                        <span className="text-xs text-slate-600">τ_0,min / (FC * γm)</span>
                                    </div>
                                    <span className="text-2xl font-bold text-blue-400">{taud_min.toFixed(3)} <span className="text-sm text-slate-500">MPa</span></span>
                                </div>
                            </div>
                            
                            <div className="mt-6 bg-slate-900/50 p-3 rounded text-xs text-slate-500 border border-slate-700/50">
                                Valori di riferimento minimi dalla tabella. Per verifiche pressoflessione fuori piano o a taglio (Turnšek-Čačovič), utilizzare questi valori ridotti.
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---

        const App = () => {
          const [activeTab, setActiveTab] = useState('ca');

          return (
            <div className="min-h-screen font-sans text-slate-200 pb-10">
              {/* Header */}
              <header className="bg-slate-900 border-b border-slate-800 p-4 shadow-lg sticky top-0 z-10">
                <div className="max-w-5xl mx-auto flex justify-between items-center">
                    <div className="flex items-center gap-3">
                        <div className="bg-blue-600 p-2 rounded-lg shadow-lg shadow-blue-900/20">
                            <Calculator className="text-white" size={24} />
                        </div>
                        <div>
                            <h1 className="text-xl font-bold tracking-wide text-white">Cemento Armato - Acciaio - Murature</h1>
                            <p className="text-xs text-slate-400">Strumenti di pre-dimensionamento e verifica NTC 2018</p>
                        </div>
                    </div>
                    <div className="hidden md:flex gap-4 text-sm text-slate-500">
                        <span>Cap. 4 Costruzioni Civili</span>
                        <span>Cap. 8 Esistenti</span>
                    </div>
                </div>
              </header>

              {/* Main Content */}
              <main className="max-w-5xl mx-auto mt-6 p-2 md:p-4">
                
                {/* Navigation */}
                <div className="flex overflow-x-auto gap-2 mb-6 bg-slate-900/80 p-2 rounded-xl border border-slate-800 backdrop-blur-sm">
                    <button 
                        onClick={() => setActiveTab('ca')}
                        className={`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all whitespace-nowrap ${activeTab === 'ca' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/50' : 'text-slate-400 hover:bg-slate-800 hover:text-slate-200'}`}
                    >
                        <Layout size={18} /> Cemento Armato
                    </button>
                    <button 
                        onClick={() => setActiveTab('steel')}
                        className={`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all whitespace-nowrap ${activeTab === 'steel' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/50' : 'text-slate-400 hover:bg-slate-800 hover:text-slate-200'}`}
                    >
                        <Ruler size={18} /> Acciaio
                    </button>
                     <button 
                        onClick={() => setActiveTab('masonry')}
                        className={`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all whitespace-nowrap ${activeTab === 'masonry' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/50' : 'text-slate-400 hover:bg-slate-800 hover:text-slate-200'}`}
                    >
                        <Building size={18} /> Muratura (Esistente)
                    </button>
                </div>

                {/* Workspace */}
                <div className="bg-slate-900 rounded-2xl shadow-xl min-h-[500px] border border-slate-800">
                    {activeTab === 'ca' && <ConcreteModule />}
                    {activeTab === 'steel' && <SteelModule />}
                    {activeTab === 'masonry' && <MasonryModule />}
                </div>

                {/* Footer / Disclaimer */}
                <div className="mt-8 mb-8 p-4 bg-yellow-900/10 border border-yellow-700/30 rounded-lg flex gap-3 items-start text-yellow-500 text-sm">
                    <AlertTriangle className="flex-shrink-0 mt-0.5" size={18} />
                    <div>
                        <strong>Disclaimer Tecnico:</strong> Questo software è a scopo dimostrativo ed educativo. I calcoli implementati sono semplificazioni delle procedure NTC 2018 e Circolare 2019. Non utilizzare per la progettazione esecutiva senza la validazione di un Ingegnere abilitato.
                    </div>
                </div>
              </main>
            </div>
          );
        };

        // RENDER
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
